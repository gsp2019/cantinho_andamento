<!DOCTYPE html>
<html lang="pt-BR" data-bs-theme="auto">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cantinho do Sabor - Cardápio</title>
    <link rel="stylesheet" href="/stylesheets/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    

    <style>
        body {
            font-family: 'Helvetica Neue', sans-serif;
            background-color: #121212; /* Escuro */
            color: #ffffff; /* Texto branco */
        }
        header {
            background-color: #8b0000;
            color: white;
            padding: 2rem 0;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        header img {
            max-height: 120px;
            margin-bottom: 15px;
        }
        header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        header h2 {
            font-size: 1.5rem;
            font-weight: 300;
            letter-spacing: 1px;
            color: #ffcc00;
        }
        .cardapio-section {
            margin: 4rem auto;
            max-width: 1200px;
            padding: 0 15px;
        }
        .cardapio-category {
            margin-bottom: 4rem;
        }
        .cardapio-category h3 {
            font-size: 2rem;
            text-transform: uppercase;
            font-weight: 500;
            border-bottom: 3px solid #8b0000;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
            color: #8b0000;
        }
        .card-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
            padding: 1.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        .card-item img {
            max-height: 100px;
            object-fit: cover;
            border-radius: 8px;
            margin-right: 20px;
        }
        .card-item .card-title {
            font-size: 1.6rem;
            font-weight: bold;
            color: #333;
        }
        .card-item .card-description {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 0.5rem;
        }
        .card-item .card-price {
            font-size: 1.5rem;
            color: #8b0000;
            font-weight: bold;
        }
        .quantity-input {
            width: 60px;
            margin-right: 20px;
        }
        .btn-pedido {
            display: inline-block;
            background-color: #8b0000;
            color: white;
            padding: 12px 30px;
            font-size: 1.1rem;
            font-weight: 500;
            border-radius: 25px;
            text-transform: uppercase;
            text-decoration: none;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s ease;
        }
        .btn-pedido:hover {
            background-color: #b22222;
        }
        footer {
            background-color: #333;
            color: #fff;
            text-align: center;
            padding: 2rem;
            margin-top: 5rem;
        }
        footer p {
            font-size: 1.1rem;
        }
    </style>
    <script src="/javascripts/precos.js"></script>
</head>
<body>

<header>
    <a href="/"> 
        <img src="/images/logo.png" alt="Logo do Cantinho do Sabor">
    </a>
    <h1>Cantinho do Sabor</h1>
    <h2>Sabor & Tradição</h2>
</header>

<div class="container cardapio-section text-center">
    <h3 style="font-size: 2.5rem; color: #8b0000;">Selecione o Número da Sua Mesa</h3>

    <form action="#cardapio" method="GET">
        <div class="form-group">
            <label for="mesa"></label>
            <select name="mesa" id="mesa" class="form-control" style="max-width: 300px; margin: 0 auto;">
                <option value="">Nº da sua mesa</option>
                <option value="Mesa 1">Mesa 1</option>
                <option value="Mesa 2">Mesa 2</option>
                <option value="Mesa 3">Mesa 3</option>
                <option value="Mesa 4">Mesa 4</option>
                <option value="Mesa 5">Mesa 5</option>
            </select>
        </div>
       <button type="submit" class="btn btn-mesa" style="background-color: #8b0000;">Selecionar Mesa</button>
    </form>
</div>

<!-- Cardápio -->
<div class="container cardapio-section">
    <h2 class="text-center mb-5" style="font-size: 2.5rem; color: #8b0000;">Nosso Cardápio</h2>

    <!-- Formulário de Pedido -->
    <form action="/finalizar_pedido" method="POST">
        
        <!-- Categoria de Pratos Principais -->
        <div class="cardapio-category">
            <h3>Salgados</h3>

            <!-- Feijoada -->
            <div class="card-item">
                <img src="/images/feijoada.webp" alt="Feijoada">
                <div>
                    <div class="card-title"> Feijoada</div>
                    <div class="card-description"> Uma deliciosa feijoada com arroz, farofa e couve. Perfeita para compartilhar!</div>
                    <div class="card-price" id="price_feijoada">R$ 45,00</div>
                </div>
                <div>
                    <input type="number" name="quantidade_feijoada" class="quantity-input" value="0" min="0"  data-price="45.00" onchange="updatePrice()">
                </div>
            </div>

            <!-- Bife Acebolado -->
            <div class="card-item">
                <img src="/images/bifeAcebolado.png" alt="Bife Acebolado">
                <div>
                    <div class="card-title">Bife Acebolado</div>
                    <div class="card-description">Bife suculento acompanhado de arroz, feijão e batata frita.</div>
                    <div class="card-price" id="price_bife">R$ 39,90</div>
                </div>
                <div>
                    <input type="number" name="quantidade_bife" class="quantity-input" value="0" min="0"  data-price="39.90" onchange="updatePrice()">
                </div>
            </div>

            <!-- Moqueca de Peixe -->
            <div class="card-item">
                <img src="/images/moqueca.jpg" alt="Moqueca de Peixe">
                <div>
                    <div class="card-title">Moqueca de Peixe</div>
                    <div class="card-description">Peixe fresco em molho de coco e dendê, servido com arroz branco.</div>
                    <div class="card-price" id="price_moqueca">R$ 59,90</div>
                </div>
                <div>
                    <input type="number" name="quantidade_moqueca" class="quantity-input" value="0" min="0"  data-price="59.90" onchange="updatePrice()">
                </div>
            </div>

    

        <!-- Categoria de Bebidas -->
        <div class="cardapio-category">
            <h3>Bebidas</h3>

            <!-- Suco Natural -->
            <div class="card-item">
                <img src="/images/sucos.jfif" alt="Suco Natural">
                <div>
                    <div class="card-title">Suco Natural</div>
                    <div class="card-description">Escolha entre laranja, abacaxi ou maracujá. Natural e refrescante!</div>
                    <div class="card-price" id="price_suco">R$ 10,00</div>
                </div>
                <div>
                    <input type="number" name="quantidade_suco" class="quantity-input" value="0" min="0" data-price="10.00" onchange="updatePrice()">
                </div>
            </div>

            <!-- Refrigerante -->
            <div class="card-item">
                <img src="/images/refrigerante.jpg" alt="Refrigerante">
                <div>
                    <div class="card-title">Refrigerante</div>
                    <div class="card-description">Escolha entre Coca-Cola, Fanta ou Guaraná.</div>
                    <div class="card-price" id="price_refrigerante">R$ 8,00</div>
                </div>
                <div>
                    <input type="number" name="quantidade_refrigerante" class="quantity-input" value="0" min="0" data-price="8.00" onchange="updatePrice()">
                </div>
            </div>

            <div class="card-item">
                <img src="/images/cerveja.jfif" alt="Cerveja Artesanal">
                <div>
                    <div class="card-title">Cerveja Artesanal</div>
                    <div class="card-description">Cerveja artesanal gelada, com diferentes sabores.</div>
                    <div class="card-price" id="price_cerveja">R$ 15,00</div>
                </div>
                <div>
                    <input type="number" name="quantidade_cerveja" class="quantity-input" value="0" min="0" data-price="15.00" onchange="updatePrice()">
                </div>
            </div>
        </div>

        <!-- Categoria de Lanches -->
<div class="cardapio-category">
    <h3>Lanches</h3>

    <!-- Hambúrguer Artesanal -->
    <div class="card-item">
        <img src="/images/hamburguer_artesanal-.webp" alt="Hambúrguer Artesanal">
        <div>
            <div class="card-title">Hambúrguer Artesanal</div>
            <div class="card-description">Pão macio com hambúrguer artesanal, queijo, alface, tomate e molho especial.</div>
            <div class="card-price" id="price_hamburguer_artesanal">R$ 29,90</div>
        </div>
        <div>
            <input type="number" name="quantidade_hamburguer" class="quantity-input" value="0" min="0" data-price="29.90" onchange="updatePrice()">
        </div>
    </div>

    <!-- Sanduíche de Frango -->
    <div class="card-item">
        <img src="/images/sanduicheFrango.avif" alt="Sanduíche de Frango">
        <div>
            <div class="card-title">Sanduíche de Frango</div>
            <div class="card-description">Sanduíche de frango grelhado com alface, tomate e molho de iogurte.</div>
            <div class="card-price" id ="price_sanduiche_frango">R$ 19,90</div>
        </div>
        <div>
            <input type="number" name="quantidade_sanduiche_frango" class="quantity-input" value="0" min="0"  data-price="19.90" onchange="updatePrice()">
        </div>
    </div>

    <!-- Hot Dog -->
    <div class="card-item">
        <img src="/images/cachorroQuente.jpg" alt="Hot Dog">
        <div>
            <div class="card-title">Hot Dog</div>
            <div class="card-description">Cachorro-quente com salsicha, molho de tomate, batata palha e milho.</div>
            <div class="card-price" id="price_hotdog">R$ 12,00</div>
        </div>
        <div>
            <input type="number" name="quantidade_hotdog" class="quantity-input" value="0" min="0"  data-price="12.00" onchange="updatePrice()">
        </div>
    </div>

    <!-- Pastel de Carne -->
    <div class="card-item">
        <img src="/images/pastel.jfif" alt="Pastel de Carne">
        <div>
            <div class="card-title">Pastel de Carne</div>
            <div class="card-description">Pastel frito recheado com carne moída bem temperada.</div>
            <div class="card-price" id="price_pastel">R$ 8,00</div>
        </div>
        <div>
            <input type="number" name="quantidade_pastel" class="quantity-input" value="0" min="0"  data-price="8.00" onchange="updatePrice()">
        </div>
    </div>

    <!-- Coxinha -->
    <div class="card-item">
        <img src="/images/coxinha.jfif" alt="Coxinha">
        <div>
            <div class="card-title">Coxinha</div>
            <div class="card-description">Coxinha crocante com recheio de frango desfiado e temperado.</div>
            <div class="card-price" id="price_coxinha">R$ 6,00</div>
        </div>
        <div>
            <input type="number" name="quantidade_coxinha" class="quantity-input" value="0" min="0"  data-price="6.00" onchange="updatePrice()">
        </div>
    </div>
</div>


        <!-- Categoria de Sobremesas -->
        <div class="cardapio-category">
            <h3>Sobremesas</h3>

            <!-- Pudim -->
            <div class="card-item">
                <img src="/images/pudim.jpg" alt="Pudim">
                <div>
                    <div class="card-title">Pudim</div>
                    <div class="card-description">Clássico pudim de leite condensado com caramelo.</div>
                    <div class="card-price" id="price_pudim">R$ 12,00</div>
                </div>
                <div>
                    <input type="number" name="quantidade_pudim" class="quantity-input" value="0" min="0" data-price="12.00" onchange="updatePrice()">
                </div>
            </div>

            <!-- Torta de Limão -->
            <div class="card-item">
                <img src="/images/torta choco.jfif" alt="Torta de Limão">
                <div>
                    <div class="card-title">Torta de chocolate</div>
                    <div class="card-description">Torta cremosa com base crocante e recheio de chocolate.</div>
                    <div class="card-price" id="price_torta">R$ 15,00</div>
                </div>
                <div>
                    <input type="number" name="quantidade_torta_limao" class="quantity-input" value="0" min="0"  data-price="15.00" onchange="updatePrice()">
                </div>
            </div>
        </div>

        <!-- Finalizar Pedido -->
        <div class="text-center">
            <p><a class="btn btn-secondary" href="/pagamentos" 
                style="background-color:#8b0000;">finalizar pedido </a></p>
        </div>
    </form>

</div>

<!-- Footer -->
<footer class="text-center mt-4 py-3">

     <p>Aguardamos sua visita!<br>
       Rua Ipanema, 1243 - Rio de Janeiro<br>
       Telefone: (75) 98898-8547</p>
       <div class="total-price" id="total">Total: R$ 0,00</div>
       
       <div class="container">
        <h2>Adicionar Novo Item ao Cardápio</h2>
        <form id="adicionar-item">
            <div class="form-group">
                <label for="nome">Nome do Prato</label>
                <input type="text" class="form-control" id="nome" required>
            </div>
            <div class="form-group">
                <label for="descricao">Descrição</label>
                <textarea class="form-control" id="descricao" required></textarea>
            </div>
            <div class="form-group">
                <label for="imagem">URL da Imagem</label>
                <input type="text" class="form-control" id="imagem" required>
            </div>
             <div class="form-group">
                <label for="preco">Preço</label>
                <input type="number" class="form-control" id="preco" required>
            </div>
            <div class="form-group">
                <label for="categoria">Categoria</label>
                <select class="form-control" id="categoria">
                    <option value="Salgados">Salgados</option>
                    <option value="Bebidas">Bebidas</option>
                    <option value="Lanches">Lanches</option>
                </select>
            </div>
            <button type="submit" class="btn btn-primary">Adicionar Item</button>
        </form>
      <hr>
        <h2>Itens do Cardápio</h2>
        <ul id="lista-cardapio" class="list-group mt-3">
            <!-- Os itens serão inseridos aqui -->
        </ul>
   
    </div>
</footer>

<script>
    // Função para atualizar o preço total
    function updatePrice() {
        let total = 0;
        
        // Percorrer todos os campos de quantidade e calcular o total
        const inputs = document.querySelectorAll('input[type="number"]');
        inputs.forEach(input => {
            const price = parseFloat(input.getAttribute('data-price'));
            const quantity = parseInt(input.value);

            if (!isNaN(quantity) && quantity >= 0 && !isNaN(price)) {
            total += price * quantity;
        }
    });

        // Atualizar o valor total na interface
        document.getElementById('total').textContent = `Total: R$ ${total.toFixed(2)}`;
    }
    document.addEventListener("DOMContentLoaded", updatePrice);

    
</script>

<script type="module">
    // Configuração do Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore.js";


    const firebaseConfig = {
        apiKey: "AIzaSyApKXQYEhUruQfeA93ku6LGcb269crMp6U",
        authDomain: "restaurante-72f1d.firebaseapp.com",
        projectId: "restaurante-72f1d",
        storageBucket: "restaurante-72f1d.firebasestorage.app",
        messagingSenderId: "376519810490",
        appId: "1:376519810490:web:241ca8c912f3b1d3859183",
        measurementId: "G-3ZD9CKYS6F"
      };

    // Inicializar o Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // Função para adicionar um item ao Firestore
    document.getElementById('adicionar-item').addEventListener('submit', async function(event) {
        event.preventDefault();

        const nome = document.getElementById('nome').value;
        const descricao = document.getElementById('descricao').value;
        const imagem = document.getElementById('imagem').value;
        const preco = parseFloat(document.getElementById('preco').value);
        const categoria = document.getElementById('categoria').value;

        try {
            await addDoc(collection(db, "cardapio"), {
                nome: nome,
                descricao: descricao,
                imagem: imagem,
                preco: preco,
                categoria: categoria,
                dataCriacao: new Date() // Adiciona uma data de criação
            });

            alert("Item adicionado com sucesso!");
            document.getElementById('adicionar-item').reset();
        } catch (error) {
            console.error("Erro ao adicionar item:", error);
            alert("Erro ao adicionar item. Tente novamente.");
        }
    });

    // Função para mostrar as coisas do Firestore
    async function carregarItensCardapio() {
            const listaCardapio = document.getElementById('lista-cardapio');
            listaCardapio.innerHTML = ""; // Limpa a lista antes de carregar os itens

            try {
                const querySnapshot = await getDocs(collection(db, "cardapio"));
                querySnapshot.forEach((doc) => {
                    const item = doc.data();

                    // Criar um elemento de lista para cada item
                    const li = document.createElement('li');
                    li.className = "list-group-item d-flex justify-content-between align-items-center";
                
                    //Aqui tu vai organizar o cadapio, gabrielle
                    li.innerHTML = `
        <div class="d-flex align-items-center">
          <img src="${item.imagem}" alt="${item.nome}" class="img-thumbnail me-3" style="width: 100px; height: 100px; object-fit: cover;">
          <div>
            <strong>${item.nome}</strong> - ${item.categoria}<br>
            <small>${item.descricao}</small>
          </div>
        </div>
        <span class="badge bg-primary rounded-pill">R$ ${item.preco.toFixed(2)}</span>
      `;

                    listaCardapio.appendChild(li);
                });
            } catch (error) {
                console.error("Erro ao carregar itens do Firestore:", error);
                alert("Erro ao carregar o cardápio. Tente novamente.");
            }
        }

        // Carregar itens ao carregar a página
        document.addEventListener("DOMContentLoaded", carregarItensCardapio);
</script>

</body>
</html>
